<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon"
        href="./assets/spfc.png">
    <link rel="stylesheet" href="css/blog.css">

    <link rel=" stylesheet" href="css/quiz.css">
    <script src="./js/funcoes.js"></script>
    <link rel="stylesheet" href="./css/tel-inicial.css">

</head>

<body>
    <div class="header">
        <div class="container">
            <a href="index.html">
                <h1 class="titulo"> <img width="75px" height="75px"
                        src="./assets/spfc.png"
                        alt=""></h1>
            </a>
            <ul class="navbar">
                <li class="agora">Inicial</li>
                <li>
                    <a href="pontuação.html">Pontuações</a>
                </li>
                <li>|</li>
                <li>
                    <a href="perfil.html">Perfil</a>
                </li>
                <li>
                    <a href="estatisticas.html">voltar</a>
                </li>
            </ul>
        </div>
    </div><br><br>

    <div class="quiz">
        <div class="saopaulo">
            <span>Quiz SPFC</span>
            <div class="card">
                <div id="questao1">
                    <h1 style="color: white;">1-Quantos campeonatos paulistas o São Paulo tem ?</h1><br><br><br>
                    <div class="resp">
                        <div class="opcao">
                            <input type="radio" nome="opcao1" value="22">
                            <span class="text">a)22</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" nome="opcao1" value="25">
                            <span class="text">b)25</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" nome="opcao1" value="30">
                            <span class="text">c)30</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" nome="opcao1" value="24">
                            <span class="text">d)24 </span>
                        </div>
                    </div>
                </div>
                <div class="questoes" id="questao2" style="display: none;">
                    <h1>2- Quantas libertadores o São Paulo tem ?</h1>
                    <div class="resp">
                        <div class="opcao">
                            <input type="radio" name="opcao2" value="2">
                            <span class="text">a) 2</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao2" value="3">
                            <span class="text">b) 3</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao2" value="4">
                            <span class="text">c) 4</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao2" value="1">
                            <span class="text">d)1</span>
                        </div>
                    </div>
                </div>
                <div class="questoes" id="questao3" style="display: none;">
                    <h1>3-Quantos mundiais o São Paulo tem?</h1>
                    <div class="resp">
                        <div class="opcao">
                            <input type="radio" name="opcao3" value="1">
                            <span class="text">a) 1</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao3" value="2">
                            <span class="text"> b) 2</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao3" value="3">
                            <span class="text">c) 3</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao3" value="4">
                            <span class="text">d)4 </span>
                        </div>
                    </div>
                </div>
                <div class="questoes" id="questao4" style="display: none;">
                    <h1>4- Quantos titulos do brasileirao o São Paulo tem?</h1>
                    <div class="resp">
                        <div class="opcao">
                            <input type="radio" name="opcao4" value="8">
                            <span class="text">a) 8</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao4" value="7">
                            <span class="text">b) 7</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao4" value="6">
                            <span class="text">c) 6</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao4" value="5">
                            <span class="text">d) 5</span>
                        </div>
                    </div>
                </div>
                <div class="questoes" id="questao5" style="display: none;">
                    <h1>5-Quantas copas do brasil o São Paulo tem?</h1>
                    <div class="resp">
                        <div class="opcao">
                            <input type="radio" name="opcao5" value="0">
                            <span class="text">a) 0</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao5" value="3">
                            <span class="text">b) 3</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao5" value="2">
                            <span class="text">c) 2</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao5" value="1">
                            <span class="text">d) 1</span>
                        </div>
                    </div>
                </div>
                <div class="questoes" id="questao6" style="display: none;">
                    <h1>6- Quem é o maior artilheiro da historia do São Paulo?</h1>
                    <div class="resp">
                        <div class="opcao">
                            <input type="radio" name="opcao6" value="Rogerio Ceni">
                            <span class="text">a) Rogerio Ceni</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao6" value="Calleri">
                            <span class="text">b) Calleri</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao6" value="Serginho Chulapa">
                            <span class="text">c) Serginho Chulapa</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao6" value="Luis Fabiano">
                            <span class="text">d) Luis Fabiano</span>
                        </div>
                    </div>
                </div>
                <div class="questoes" id="questao7" style="display: none;">
                    <h1>7- Quem era o capitão do SP FC no Tri Brasileiro de 2006, 07 e 08?
                    </h1>
                    <div class="resp">
                        <div class="opcao">
                            <input type="radio" name="opcao7" value="mineiro">
                            <span class="text">a) Mineiro</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao7" value="josue">
                            <span class="text">b) Josue</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao7" value="borges">
                            <span class="text">c) Borges</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao7" value="rogerio ceni">
                            <span class="text">d)Rogerio ceni</span>
                        </div>
                    </div>
                </div>
                <div class="questoes" id="questao8" style="display: none;">
                    <h1>8- Contra quem o goleiro Rogério Ceni fez seu gol No 100 batedo falta?</h1>
                    <div class="resp">
                        <div class="opcao">
                            <input type="radio" name="opcao8" value="corinthians">
                            <span class="text">a) Corinthians</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao8" value="santos">
                            <span class="text">b) Santos</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao8" value="palmeiras">
                            <span class="text">c) Palmeiras</span>
                        </div>
                        <div class="opcao">
                            <input type="radio" name="opcao8" value="agua santa">
                            <span class="text">d) Água santa</span>
                        </div>
                    </div>
                </div>
                <div style="display: flex;">
                    <button class="botao" id="anterior" onclick="AntQuestao()">Questão Anterior</button>
                    <button class="botao" id="proxima" onclick="ProxQuestao()">Próxima Questão</button>
                    <button class="botao" id="finalizar" onclick="FinalizarQuiz()">Finalizar Quiz</button>
                </div>
            </div>
        </div>
    </div>

</body>

</html>

<script>
    document.getElementById('anterior').style.display = 'none';

    document.getElementById('finalizar').style.display = 'none';



    var Usuario = 0;
    var anterior = 0;
    var proxima = 0;
    var pontos = 0;
    var radios = [];
    var respostascorretas = ["22", "3", "3", "6", "0", "serginho chulapa", "rogerio ceni", "corinthians"];
    var idUsuario = sessionStorage.ID_USUARIO;
    var media = 0





    function AntQuestao() {
        anterior--;
        proxima = anterior

        if (anterior == 6) {
            question8.style.display = "none";
            question7.style.display = "flex";
            document.getElementById('anterior').style.display = 'block';
            document.getElementById('finalizar').style.display = 'none';
        } else if (anterior == 5) {
            questao7.style.display = "none";
            questao6.style.display = "flex";
        } else if (anterior == 4) {
            questao6.style.display = "none";
            questao5.style.display = "flex";
        } else if (anterior == 3) {
            questao5.style.display = "none";
            questao4.style.display = "flex";
        } else if (anterior == 2) {
            questao4.style.display = "none";
            questao3.style.display = "flex";
        } else if (anterior == 1) {
            questao3.style.display = "none";
            questao2.style.display = "flex";
        } else if (anterior == 0) {
            questao2.style.display = "none";
            questao1.style.display = "flex";
            document.getElementById('anterior').style.display = 'none';
        }
    }

    function ProxQuestao() {
        proxima++;
        anterior = proxima
        if (proxima == 1) {
            questao1.style.display = "none";
            questao2.style.display = "flex";
            document.getElementById('anterior').style.display = 'block';

        } else if (proxima == 2) {
            questao2.style.display = "none";
            questao3.style.display = "flex";
        } else if (proxima == 3) {
            questao3.style.display = "none";
            questao4.style.display = "flex";
        } else if (proxima == 4) {
            questao4.style.display = "none";
            questao5.style.display = "flex";
        } else if (proxima == 5) {
            questao5.style.display = "none";
            questao6.style.display = "flex";
        } else if (proxima == 6) {
            questao6.style.display = "none";
            questao7.style.display = "flex";
        } else if (proxima == 7) {
            questao7.style.display = "none";
            questao8.style.display = "flex";
            document.getElementById('proxima').style.display = 'none';
            document.getElementById('finalizar').style.display = 'block';
        }
    }

    function FinalizarQuiz() {
        radios = document.querySelectorAll("input[type='radio']:checked");
        if (radios.length < respostascorretas.length) {

        } else {
            Usuario = 1;
            for (var index = 0; index < radios.length; index++) {
                if (respostascorretas.indexOf(radios[index].value) >= 0) {
                    Usuario++;
                }
            }
            pontos = Usuario * 10;
            media = (pontos / 80 ) * 100 

            fetch("/usuarios/cadastrarPontuacao", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    // crie um atributo que recebe o valor recuperado aqui
                    // Agora vá para o arquivo routes/usuario.j
                    // idUsuarioServer: idUsuario,
                    idUsuarioServer: sessionStorage.ID_USUARIO,
                    pontosServer: pontos,
                    mediaServer: media,

                })
            }).then(function (resposta) {

                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    alert('Quiz concluido, iremos mostrar sua pontuação')
                    window.location = "./pontuação.html";
                } else {
                    throw ("Houve um erro ao tentar realizar o cadastro!");
                }
            }).catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });

            return false;
        }
    }
</script>